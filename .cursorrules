---
description: "Guía de desarrollo Frontend (Flutter) para Zonix Eats"
alwaysApply: true
---

## Instrucciones Completas

Para instrucciones completas del proyecto, arquitectura, convenciones, skills disponibles
y reglas de negocio, consulta el archivo `AGENTS.md` en la raíz del proyecto.

Cursor lee `AGENTS.md` automáticamente. Toda la información de desarrollo está centralizada allí.

---

## Reglas de Colaboración (Cursor-Específicas)

**IMPORTANTE: El usuario es el líder del proyecto. No soy un autómata que ejecuta sin pensar.**

1. **SIEMPRE PREGUNTAR** antes de realizar cualquier acción
2. **NUNCA crear archivos nuevos** si es para editar código existente
3. **SIEMPRE sugerir detalladamente** qué hacer y esperar aprobación
4. **NUNCA hacer push/merge a git** sin orden explícita del usuario
5. **Solo hacer commits locales** cuando se realicen cambios
6. **El usuario prueba primero** y da la orden cuando está seguro
7. **Documentar avances:** Después de implementar correcciones o mejoras relevantes, anotar los avances en `README.md` o `AGENTS.md` (entrada breve o sección "Cambios recientes") y actualizar la fecha **Última actualización** en `.cursorrules`, `AGENTS.md` y `README.md`. Si el cambio afecta una skill de dominio, actualizar la skill y su fecha.

### Convención de Respuesta

```
1. Explicar qué se va a hacer y por qué
2. Mostrar código específico con contexto
3. Esperar confirmación antes de implementar
4. Reportar resultado después de implementar
```

---

## Recordatorios Rápidos (Ver AGENTS.md para detalles)

### Stack
- **Flutter** >=3.5.0 / Dart 3.5.0+ / Provider pattern
- **Pusher + FCM** para eventos (NO WebSocket)
- **AppConfig.apiUrl** — NUNCA URLs hardcodeadas

### Roles (Solo 4 — Terminología Estándar)

| Código en BD | Nombre Estándar | Alias aceptados          |
| ------------ | --------------- | ------------------------ |
| `users`      | **Buyer**       | Comprador, Cliente       |
| `commerce`   | **Commerce**    | Comercio, Restaurante    |
| `delivery`   | **Delivery**    | Delivery Agent, Repartidor |
| `admin`      | **Admin**       | Administrador            |

### Patrón de Servicio
```dart
class XxxService extends ChangeNotifier {
  List<Xxx> _items = [];
  bool _isLoading = false;
  String? _error;
  // getters, notifyListeners(), try/catch
}
```

### Patrón de Pantalla
```dart
// initState → addPostFrameCallback → service.load()
// build → Consumer<Service> → loading/error/empty/data states
```

### Reglas Clave
- SIEMPRE usar `AppConfig.apiUrl`
- SIEMPRE usar `AuthHelper.getAuthHeaders()`
- SIEMPRE `Consumer<Service>` para rebuilds reactivos
- UN solo comercio por carrito
- Pusher SOLAMENTE (NO WebSocket)

### Skills de dominio recomendadas

- **zonix-ui-design**: para construir o ajustar pantallas, widgets, cards, botones y layouts de la app.
- **zonix-onboarding**: para cualquier flujo de registro / onboarding por rol, perfiles, teléfonos, direcciones y documentos.
- **zonix-order-lifecycle**: para UI y servicios relacionados con estados de orden, cancelaciones y tracking de pedidos.
- **zonix-realtime-events**: para integración de Pusher y FCM en Flutter (suscripciones, manejo de eventos y notificaciones).

### Tests
```bash
flutter test                         # Todos (214)
flutter test test/services/...       # Específico
flutter analyze                      # Análisis
```

---

---

**Última actualización:** 11 Febrero 2026
**Para instrucciones completas:** Ver `AGENTS.md`
